<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Basic -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, maximum-scale=1, initial-scale=1, user-scalable=0">

    <!-- Site Metas -->
    <title>Food Funday Restaurant - One page HTML Responsive</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Site CSS -->
    <link rel="stylesheet" href="css/style.css">
   <link rel="stylesheet" href="css/try1.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/try1.css">
    <!-- color -->
    <link id="changeable-colors" rel="stylesheet" href="css/colors/orange.css" />
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

    <!-- Modernizer -->
    <script src="js/modernizer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/BrowserFS/1.4.3/browserfs.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

    <script src="https://cdn.ethers.io/lib/ethers-5.0.umd.min.js" charset="utf-8" type="text/javascript"></script>
</head>

<body>
    
    <div id="site-header">
        <header id="header" class="header-block-top">
            <div class="container">
                <div class="row">
                    <div class="main-menu">
                        <!-- navbar -->
                        <nav class="navbar navbar-default" id="mainNav">
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                                    <span class="sr-only">Toggle navigation</span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                                <div class="logo">
                                    <a class="navbar-brand js-scroll-trigger logo-header" href="#">
                                        <img src="images/logo.png" alt="">
                                    </a>
                                </div>
                            </div>
                            <div id="navbar" class="navbar-collapse collapse">
                                <ul class="nav navbar-nav navbar-right">
                                    <li class="active"><a href="#banner">Home</a></li>
                                    <li><a href="#about">About us</a></li>
                                    <li><a href="#services">Services</a></li>
                                    <li><a href="#motto">Motto</a></li>
                                    <li><a href="#suppliers">Suppliers</a></li>
                                    <li><a href="#gallery">Gallery</a></li>
                                    <li><a href="#partners">Partners</a></li>
                                    <li><a href="#team">Team</a></li>
                                    <li><a href="#contact">Contact us</a></li>
                                </ul>
                            </div>
                            <!-- end nav-collapse -->
                        </nav>
                        <!-- end navbar -->
                    </div>
                </div>
                <!-- end row -->
            </div>
            <!-- end container-fluid -->
        </header>
        <!-- end header -->
    </div>
	<!-- end site-header -->

  
   
    <!-- end banner https://static.lumosity.com/resources/home_page_templates/574/neuralnetwork.mp4 -->
        
            
                    
               
                <!-- end col -->
            </div>
            <!-- end row -->
        </div>
    <video id="videobcg" preload="auto" autoplay="true" loop="loop" muted="muted" volume="0">
        <source src="videos/Black_Neuralnetwork.mp4" type="video/mp4">
            <source src="movie.webm" type="video/webm">Sorry, your browser does not support HTML5 video.</video>
                <div id="getpage" class="menu-main pad-top-100 pad-bottom-100" >
                    <div class="container">
                        <div class="row">
                            <div >
                                <div class="wow fadeIn" data-wow-duration="1s" data-wow-delay="0.1s">
                                    <h2 class="block-title text-center">
                                        Getting Temperature and Location Data
                                </h2>
                               
                                <br>
                                    <!-- <p class="title-caption text-center">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. </p> -->
                                </div>
                                
                                    
                                <div class="container " >
                                    
                                            <br>
                                            <form class="form">
                                                
                                            <div class="col-lg-6">
                                            <label for="custid">Customer ID: </label>
                                            <input class="form-control" id="custid" type="text"  >
                                            </div>
                                
                                            <div class="col-lg-6">
                                            <label for="pid">Package ID: </label>
                                            <input class="form-control"  id="pid" type="text" >
                                            </div>
                                
                                            <br>
                                        </form>
                                            
                                            <center><button style="padding:20px;margin-top:20px;color: white;background-color: orange;" class=" " id="getMessageButton">Get secret message</button></center>  
                                            
                                            <br>
                                            <br>
                                        <form >
                                            <div class="col-lg-4" >
                                                <label for="avgtemp">Average Temperature: </label>
                                                <input class="form-control"  id="temp" type="text" disabled>
                                                </div>
                                    
                                                <div class="col-lg-4">
                                                    <label for="message">Time</label>
                                                    <input class="form-control" id="time" type="text" disabled>
                                                </div>
                                                 <div class="col-lg-4">
                                                    <label for="message">Location</label>
                                                    <input class="form-control" id="loc" type="text" disabled>
                                                </div>
                                    
                                        </form>
                                    </div>
                                    
                                </div>
                                
            
                    
               
                <!-- end col -->
            </div>
            <!-- end row -->
        </div>
        <!-- end container -->
    </div> 
    
</section>

<script>

    mnemonic = ""
    walletMnemonic = ethers.Wallet.fromMnemonic(mnemonic);
    
    walletPrivateKey = new ethers.Wallet(walletMnemonic.privateKey);
    
    //alert(walletMnemonic.address === walletPrivateKey.address);
    // true
    
    // The address as a Promise per the Signer API
    walletMnemonic.getAddress();
    // { Promise: '0x71CB05EE1b1F506fF321Da3dac38f25c0c9ce6E1' }
    
    
    console.log("Wallet Address: "+walletMnemonic.address);
    //alert("Wallet Address: "+walletMnemonic.address);
    
    /*-------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    var abi = [
        {
            "constant": true,
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "_c_num",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "_p_id",
                    "type": "uint256"
                }
            ],
            "name": "fetchtransact",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "a",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "b",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "c",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "d",
                    "type": "uint256"
                }
            ],
            "payable": false,
            "stateMutability": "view",
            "type": "function"
        },
        {
            "constant": false,
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "_c_num",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "_p_id",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "_temp",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "_time",
                    "type": "uint256"
                }
            ],
            "name": "newtransaction",
            "outputs": [],
            "payable": false,
            "stateMutability": "nonpayable",
            "type": "function"
        }
    ]
    
    var cntradd = '0x902a15f07DbEA287C6DB5579ffB346c6668710CF'
    
     //= ethers.providers.InfuraProvider.getWebSocketProvider('wss://rinkeby.infura.io/ws/v3/023e22764cb642ad964efa7d8d404f3e');
     var provider = new ethers.providers.InfuraProvider("rinkeby", '023e22764cb642ad964efa7d8d404f3e');
    
    /*let provider = new ethers.providers.InfuraProvider("rinkeby", {
        projectId: '023e22764cb642ad964efa7d8d404f3e023e22764cb642ad964efa7d8d404f3e',
        projectSecret: '68e79fa2ac224b249e50da73a43ee431'
    });*/
    
    var wallet = walletMnemonic.connect(provider);
    
    
    
    var RemixContract = new ethers.Contract( cntradd , abi , provider);
    
    
    $("#getMessageButton").click(function () {
                custid1 = $("#custid").val();
                pid1 = $("#pid").val();
                //temp1= $("#temp").val();
                //time1 = $("#time").val();
    
                var callPromise = RemixContract.fetchtransact(custid1,pid1).then(function(result){
                alert("Fetching Data from Blockchain!");
                console.log(result);
                $("#temp").val(result.c);
                $("#time").val(result.d);
                return result;
                });
            });

    
    //const mnemonic1 = fs.readFileSync(".secret").toString().trim();
    //alert(mnemonic);
    </script>
    

    <a href="#" class="scrollup" style="display: none;">Scroll</a>

    <section id="color-panel" class="close-color-panel">
        <a class="panel-button gray2"><i class="fa fa-cog fa-spin fa-2x"></i></a>
        <!-- Colors -->
        <div class="segment">
            <h4 class="gray2 normal no-padding">Color Scheme</h4>
            <a title="orange" class="switcher orange-bg"></a>
            <a title="strong-blue" class="switcher strong-blue-bg"></a>
            <a title="moderate-green" class="switcher moderate-green-bg"></a>
            <a title="vivid-yellow" class="switcher vivid-yellow-bg"></a>
        </div>
    </section>

    <!-- ALL JS FILES -->
    <script src="js/all.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- ALL PLUGINS -->
    <script src="js/custom.js"></script>
</body>

</html>